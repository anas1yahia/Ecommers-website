<div class="card-container perspective-1000 group">
  <!-- Product Card with Parallax Effect -->
  <div [routerLink]="['/product-details', product._id]"
       class="product-card relative bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-500 transform-gpu hover:scale-[1.02] cursor-pointer">

    <!-- Floating Badge -->
    <div class="absolute top-0 left-0 z-20 m-3">
      <div class="bg-black text-white text-xs font-bold px-2 py-1 rounded-sm transform -rotate-2">
        NEW
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="absolute top-3 right-3 z-20 flex flex-col gap-2">
      <!-- Wishlist Button -->
      <button (click)="$event.stopPropagation()" class="action-btn bg-white/80 backdrop-blur-sm rounded-full w-8 h-8 flex items-center justify-center shadow-sm hover:shadow-md transition-all opacity-0 group-hover:opacity-100 transform translate-x-4 group-hover:translate-x-0 duration-300">
        <i class="ri-heart-line text-neutral-700 hover:text-red-500 transition-colors"></i>
      </button>

      <!-- Quick View -->
      <button (click)="$event.stopPropagation()" class="action-btn bg-white/80 backdrop-blur-sm rounded-full w-8 h-8 flex items-center justify-center shadow-sm hover:shadow-md transition-all opacity-0 group-hover:opacity-100 transform translate-x-4 group-hover:translate-x-0 duration-300 delay-75">
        <i class="ri-eye-line text-neutral-700 hover:text-primary transition-colors"></i>
      </button>
    </div>

    <!-- Image Container with Parallax -->
    <div class="parallax-container relative h-[230px] overflow-hidden before:absolute before:inset-0 before:z-10 before:bg-gradient-to-b before:from-transparent before:to-black/5">
      <!-- Background Pattern (Optional) -->
      <div class="absolute inset-0 opacity-30 z-0 pattern-dots pattern-gray-700 pattern-size-2 pattern-opacity-5"></div>

      <!-- Product Image with Parallax Effect -->
      <img [src]="product.imageCover"
           alt="{{product.title}}"
           class="parallax-img absolute inset-0 w-full h-full object-cover transition-transform duration-700 ease-out transform-gpu group-hover:scale-110 z-0" />

      <!-- Category Tag -->
      <div class="absolute bottom-3 left-3 z-20">
        <span class="inline-block bg-white/80 backdrop-blur-sm text-xs font-medium text-neutral-800 px-2 py-1 rounded-sm">
          {{product.category?.name}}
        </span>
      </div>
    </div>

    <!-- Content -->
    <div class="p-4 relative z-10">
      <!-- Title & Rating -->
      <div class="mb-3">
        <div class="flex items-start justify-between gap-2">
          <h3 class="font-medium text-neutral-800 line-clamp-1 group-hover:text-primary transition-colors">
            {{product.title}}
          </h3>
          <div class="flex items-center -mt-0.5">
            <span class="text-amber-400 text-sm"><i class="ri-star-fill"></i></span>
            <span class="text-xs font-medium text-neutral-700 ml-1">{{product.ratingsAverage}}</span>
          </div>
        </div>
      </div>

      <!-- Price & Stock -->
      <div class="flex items-center justify-between">
        <!-- Prices -->
        <div class="flex items-baseline gap-2">
          <span class="text-lg font-bold">${{product.price}}</span>
          <span class="text-xs text-gray-400 line-through">$112</span>
        </div>

        <!-- Stock Status -->
        <div class="text-xs font-medium">
          <span class="inline-flex items-center text-emerald-700">
            <span class="w-1.5 h-1.5 rounded-full bg-emerald-500 mr-1"></span>
            In Stock
          </span>
        </div>
      </div>
    </div>

    <!-- Add to Cart Button - Appears on hover from bottom -->
    <div class="absolute inset-x-0 bottom-0 z-40 opacity-0 group-hover:opacity-100 transition-all duration-300">
      <div class="bg-gradient-to-t from-black/70 via-black/40 to-transparent p-4 pt-8">
        <button (click)="OnaddToCart(); $event.stopPropagation();"
                class="add-to-cart-btn bg-black hover:bg-neutral-800 text-white py-2 px-4 rounded-full text-sm font-medium flex items-center gap-2 shadow-lg w-full justify-center transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300 ease-out">
          <i class="ri-shopping-bag-line"></i>
          <span>Add to Cart</span>
        </button>
      </div>
    </div>
  </div>
</div>
